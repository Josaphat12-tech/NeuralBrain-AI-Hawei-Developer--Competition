{% extends "admin/base_dashboard.html" %}

{% block title %}Alerts - NeuralBrain AI{% endblock %}

{% block content %}
<style>
    .alerts-container {
        max-width: 1400px;
        margin: 0 auto;
        font-family: 'Inter', sans-serif;
    }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    /* HEADER SECTION - Clear Purpose & Status */
    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .alerts-header {
        margin-bottom: 2.5rem;
    }

    .alerts-title-section {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1.5rem;
    }

    .alerts-title {
        font-size: 2.75rem;
        font-weight: 700;
        color: #ffffff;
        display: flex;
        align-items: center;
        gap: 1rem;
        letter-spacing: -0.02em;
    }

    .alerts-meta {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        flex-wrap: wrap;
    }

    .alerts-status {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: rgba(34, 197, 94, 0.1);
        border: 1px solid rgba(34, 197, 94, 0.3);
        border-radius: 0.75rem;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--accent-green);
    }

    .alerts-status.warning {
        background: rgba(251, 146, 60, 0.1);
        border-color: rgba(251, 146, 60, 0.3);
        color: #fb923c;
    }

    .alerts-status.critical {
        background: rgba(239, 68, 68, 0.1);
        border-color: rgba(239, 68, 68, 0.3);
        color: #ef4444;
    }

    .status-indicator {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--accent-green);
        animation: pulse-soft 2s ease-in-out infinite;
    }

    .alerts-status.critical .status-indicator {
        background: #ef4444;
        animation: pulse-intense 1.5s ease-in-out infinite;
    }

    @keyframes pulse-soft {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.6; }
    }

    @keyframes pulse-intense {
        0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
        50% { opacity: 1; box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); }
    }

    .alerts-subtitle {
        font-size: 1.125rem;
        color: #94a3b8;
        font-weight: 400;
        letter-spacing: 0.02em;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-top: 1rem;
    }

    .pulse-indicator {
        width: 12px;
        height: 12px;
        background-color: #ef4444;
        border-radius: 50%;
        display: inline-block;
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }

    @keyframes pulse {

        0%,
        100% {
            opacity: 1;
            box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
        }

        50% {
            opacity: 0.8;
            box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
        }
    }

    .alerts-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
    }

    .stat-card {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.4) 0%, rgba(15, 23, 42, 0.4) 100%);
        border: 1px solid rgba(148, 163, 184, 0.1);
        border-radius: 1.25rem;
        padding: 1.75rem;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
        animation: fadeInScale 0.6s ease-out both;
    }

    .stat-card:nth-child(1) {
        animation-delay: 0.1s;
    }

    .stat-card:nth-child(2) {
        animation-delay: 0.2s;
    }

    .stat-card:nth-child(3) {
        animation-delay: 0.3s;
    }

    .stat-card:nth-child(4) {
        animation-delay: 0.4s;
    }

    .stat-card:hover {
        transform: translateY(-4px);
        border-color: rgba(148, 163, 184, 0.2);
    }

    .stat-number {
        font-size: 2.5rem;
        font-weight: 800;
        letter-spacing: -0.03em;
        margin-bottom: 0.5rem;
    }

    .stat-label {
        font-size: 0.875rem;
        color: #94a3b8;
        font-family: 'Space Mono', monospace;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .alerts-feed-container {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.4) 0%, rgba(15, 23, 42, 0.4) 100%);
        border: 1px solid rgba(148, 163, 184, 0.1);
        border-radius: 1.5rem;
        overflow: hidden;
        animation: fadeInScale 0.6s ease-out 0.5s both;
    }

    .feed-header {
        padding: 2rem;
        border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        background: rgba(15, 23, 42, 0.5);
    }

    .feed-title {
        font-size: 1.5rem;
        font-weight: 700;
        letter-spacing: -0.02em;
        color: #ffffff;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .feed-content {
        max-height: 700px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: rgba(148, 163, 184, 0.3) transparent;
    }

    .feed-content::-webkit-scrollbar {
        width: 8px;
    }

    .feed-content::-webkit-scrollbar-track {
        background: transparent;
    }

    .feed-content::-webkit-scrollbar-thumb {
        background: rgba(148, 163, 184, 0.3);
        border-radius: 4px;
    }

    .feed-content::-webkit-scrollbar-thumb:hover {
        background: rgba(148, 163, 184, 0.5);
    }

    .alert-item {
        padding: 2rem;
        border-bottom: 1px solid rgba(148, 163, 184, 0.05);
        position: relative;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .alert-item::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: transparent;
        transition: all 0.3s ease;
    }

    .alert-item:hover {
        background: rgba(30, 41, 59, 0.3);
    }

    .alert-item.critical {
        background: linear-gradient(90deg, rgba(239, 68, 68, 0.08) 0%, transparent 100%);
    }

    .alert-item.critical::before {
        background: #ef4444;
    }

    .alert-item.critical:hover {
        background: linear-gradient(90deg, rgba(239, 68, 68, 0.12) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-item.warning {
        background: linear-gradient(90deg, rgba(251, 146, 60, 0.08) 0%, transparent 100%);
    }

    .alert-item.warning::before {
        background: #fb923c;
    }

    .alert-item.warning:hover {
        background: linear-gradient(90deg, rgba(251, 146, 60, 0.12) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-item.info {
        background: linear-gradient(90deg, rgba(59, 130, 246, 0.06) 0%, transparent 100%);
    }

    .alert-item.info::before {
        background: #3b82f6;
    }

    .alert-item.info:hover {
        background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-item.success {
        background: linear-gradient(90deg, rgba(34, 197, 94, 0.06) 0%, transparent 100%);
    }

    .alert-item.success::before {
        background: #22c55e;
    }

    .alert-item.success:hover {
        background: linear-gradient(90deg, rgba(34, 197, 94, 0.1) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
    }

    .alert-type {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .alert-icon {
        font-size: 1.75rem;
        line-height: 1;
    }

    .alert-label {
        font-size: 0.875rem;
        font-weight: 700;
        font-family: 'Space Mono', monospace;
        letter-spacing: 0.1em;
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;
        border: 1px solid;
    }

    .alert-label.critical {
        color: #ef4444;
        background: rgba(239, 68, 68, 0.15);
        border-color: rgba(239, 68, 68, 0.3);
    }

    .alert-label.warning {
        color: #fb923c;
        background: rgba(251, 146, 60, 0.15);
        border-color: rgba(251, 146, 60, 0.3);
    }

    .alert-label.info {
        color: #3b82f6;
        background: rgba(59, 130, 246, 0.15);
        border-color: rgba(59, 130, 246, 0.3);
    }

    .alert-label.success {
        color: #22c55e;
        background: rgba(34, 197, 94, 0.15);
        border-color: rgba(34, 197, 94, 0.3);
    }

    .alert-timestamp {
        font-size: 0.8125rem;
        color: #64748b;
        font-family: 'Space Mono', monospace;
        background: rgba(15, 23, 42, 0.5);
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;
        border: 1px solid rgba(148, 163, 184, 0.1);
    }

    .alert-content {
        margin-bottom: 1.25rem;
    }

    .alert-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #ffffff;
        margin-bottom: 0.75rem;
        letter-spacing: -0.02em;
    }

    .alert-description {
        font-size: 0.9375rem;
        color: #94a3b8;
        line-height: 1.6;
        font-family: 'Space Mono', monospace;
    }

    .alert-tags {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
    }

    .alert-tag {
        font-size: 0.8125rem;
        font-weight: 600;
        font-family: 'Space Mono', monospace;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        border: 1px solid;
        transition: all 0.3s ease;
    }

    .alert-tag:hover {
        transform: translateY(-2px);
    }

    .tag-priority {
        background: rgba(239, 68, 68, 0.15);
        color: #ef4444;
        border-color: rgba(239, 68, 68, 0.3);
    }

    .tag-warning {
        background: rgba(251, 146, 60, 0.15);
        color: #fb923c;
        border-color: rgba(251, 146, 60, 0.3);
    }

    .tag-location {
        background: rgba(59, 130, 246, 0.15);
        color: #3b82f6;
        border-color: rgba(59, 130, 246, 0.3);
    }

    .tag-system {
        background: rgba(34, 197, 94, 0.15);
        color: #22c55e;
        border-color: rgba(34, 197, 94, 0.3);
    }

    .filter-controls {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        animation: fadeInUp 0.6s ease-out 0.3s both;
    }

    .filter-btn {
        padding: 0.75rem 1.5rem;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(15, 23, 42, 0.5);
        color: #94a3b8;
        border-radius: 0.75rem;
        font-size: 0.875rem;
        font-weight: 600;
        font-family: 'Space Mono', monospace;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .filter-btn:hover {
        background: rgba(30, 41, 59, 0.5);
        border-color: rgba(148, 163, 184, 0.3);
        color: #ffffff;
    }

    .filter-btn.active {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        border-color: rgba(59, 130, 246, 0.5);
        color: #ffffff;
    }
    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       EMPTY STATE STYLING - Centered, Well Positioned, Responsive
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    
    .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        min-height: 400px;
        padding: 3rem 2rem;
        text-align: center;
        gap: 1.25rem;
        animation: fadeInScale 0.6s ease-out both;
    }

    .empty-icon {
        font-size: 5rem;
        line-height: 1;
        color: #22c55e;
        display: block;
        animation: pulse 2s ease-in-out infinite;
        margin-bottom: 0.5rem;
    }

    .empty-text {
        font-size: 1.625rem;
        font-weight: 700;
        color: #ffffff;
        letter-spacing: -0.02em;
        margin: 0;
        line-height: 1.3;
    }

    .empty-state > p {
        font-size: 0.9375rem;
        color: #cbd5e1;
        font-family: 'Space Mono', monospace;
        margin: 0;
        letter-spacing: 0.02em;
        line-height: 1.5;
    }

    @keyframes fadeInDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInScale {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .alerts-subtitle {
        font-size: 1.125rem;
        color: #94a3b8;
        font-weight: 400;
        letter-spacing: 0.02em;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-top: 1rem;
    }

    .pulse-indicator {
        width: 12px;
        height: 12px;
        background-color: #ef4444;
        border-radius: 50%;
        display: inline-block;
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }

    @keyframes pulse {

        0%,
        100% {
            opacity: 1;
            box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
        }

        50% {
            opacity: 0.8;
            box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
        }
    }

    .alerts-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
    }

    .stat-card {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.4) 0%, rgba(15, 23, 42, 0.4) 100%);
        border: 1px solid rgba(148, 163, 184, 0.1);
        border-radius: 1.25rem;
        padding: 1.75rem;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
        animation: fadeInScale 0.6s ease-out both;
    }

    .stat-card:nth-child(1) {
        animation-delay: 0.1s;
    }

    .stat-card:nth-child(2) {
        animation-delay: 0.2s;
    }

    .stat-card:nth-child(3) {
        animation-delay: 0.3s;
    }

    .stat-card:nth-child(4) {
        animation-delay: 0.4s;
    }

    .stat-card:hover {
        transform: translateY(-4px);
        border-color: rgba(148, 163, 184, 0.2);
    }

    .stat-number {
        font-size: 2.5rem;
        font-weight: 800;
        letter-spacing: -0.03em;
        margin-bottom: 0.5rem;
    }

    .stat-label {
        font-size: 0.875rem;
        color: #94a3b8;
        font-family: 'Space Mono', monospace;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .alerts-feed-container {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.4) 0%, rgba(15, 23, 42, 0.4) 100%);
        border: 1px solid rgba(148, 163, 184, 0.1);
        border-radius: 1.5rem;
        overflow: hidden;
        animation: fadeInScale 0.6s ease-out 0.5s both;
    }

    .feed-header {
        padding: 2rem;
        border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        background: rgba(15, 23, 42, 0.5);
    }

    .feed-title {
        font-size: 1.5rem;
        font-weight: 700;
        letter-spacing: -0.02em;
        color: #ffffff;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .feed-content {
        max-height: 700px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: rgba(148, 163, 184, 0.3) transparent;
    }

    .feed-content::-webkit-scrollbar {
        width: 8px;
    }

    .feed-content::-webkit-scrollbar-track {
        background: transparent;
    }

    .feed-content::-webkit-scrollbar-thumb {
        background: rgba(148, 163, 184, 0.3);
        border-radius: 4px;
    }

    .feed-content::-webkit-scrollbar-thumb:hover {
        background: rgba(148, 163, 184, 0.5);
    }

    .alert-item {
        padding: 2rem;
        border-bottom: 1px solid rgba(148, 163, 184, 0.05);
        position: relative;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .alert-item::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: transparent;
        transition: all 0.3s ease;
    }

    .alert-item:hover {
        background: rgba(30, 41, 59, 0.3);
    }

    .alert-item.critical {
        background: linear-gradient(90deg, rgba(239, 68, 68, 0.08) 0%, transparent 100%);
    }

    .alert-item.critical::before {
        background: #ef4444;
    }

    .alert-item.critical:hover {
        background: linear-gradient(90deg, rgba(239, 68, 68, 0.12) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-item.warning {
        background: linear-gradient(90deg, rgba(251, 146, 60, 0.08) 0%, transparent 100%);
    }

    .alert-item.warning::before {
        background: #fb923c;
    }

    .alert-item.warning:hover {
        background: linear-gradient(90deg, rgba(251, 146, 60, 0.12) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-item.info {
        background: linear-gradient(90deg, rgba(59, 130, 246, 0.06) 0%, transparent 100%);
    }

    .alert-item.info::before {
        background: #3b82f6;
    }

    .alert-item.info:hover {
        background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-item.success {
        background: linear-gradient(90deg, rgba(34, 197, 94, 0.06) 0%, transparent 100%);
    }

    .alert-item.success::before {
        background: #22c55e;
    }

    .alert-item.success:hover {
        background: linear-gradient(90deg, rgba(34, 197, 94, 0.1) 0%, rgba(30, 41, 59, 0.3) 100%);
    }

    .alert-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
    }

    .alert-type {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .alert-icon {
        font-size: 1.75rem;
        line-height: 1;
    }

    .alert-label {
        font-size: 0.875rem;
        font-weight: 700;
        font-family: 'Space Mono', monospace;
        letter-spacing: 0.1em;
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;
        border: 1px solid;
    }

    .alert-label.critical {
        color: #ef4444;
        background: rgba(239, 68, 68, 0.15);
        border-color: rgba(239, 68, 68, 0.3);
    }

    .alert-label.warning {
        color: #fb923c;
        background: rgba(251, 146, 60, 0.15);
        border-color: rgba(251, 146, 60, 0.3);
    }

    .alert-label.info {
        color: #3b82f6;
        background: rgba(59, 130, 246, 0.15);
        border-color: rgba(59, 130, 246, 0.3);
    }

    .alert-label.success {
        color: #22c55e;
        background: rgba(34, 197, 94, 0.15);
        border-color: rgba(34, 197, 94, 0.3);
    }

    .alert-timestamp {
        font-size: 0.8125rem;
        color: #64748b;
        font-family: 'Space Mono', monospace;
        background: rgba(15, 23, 42, 0.5);
        padding: 0.375rem 0.75rem;
        border-radius: 0.5rem;
        border: 1px solid rgba(148, 163, 184, 0.1);
    }

    .alert-content {
        margin-bottom: 1.25rem;
    }

    .alert-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #ffffff;
        margin-bottom: 0.75rem;
        letter-spacing: -0.02em;
    }

    .alert-description {
        font-size: 0.9375rem;
        color: #94a3b8;
        line-height: 1.6;
        font-family: 'Space Mono', monospace;
    }

    .alert-tags {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
    }

    .alert-tag {
        font-size: 0.8125rem;
        font-weight: 600;
        font-family: 'Space Mono', monospace;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        border: 1px solid;
        transition: all 0.3s ease;
    }

    .alert-tag:hover {
        transform: translateY(-2px);
    }

    .tag-priority {
        background: rgba(239, 68, 68, 0.15);
        color: #ef4444;
        border-color: rgba(239, 68, 68, 0.3);
    }

    .tag-warning {
        background: rgba(251, 146, 60, 0.15);
        color: #fb923c;
        border-color: rgba(251, 146, 60, 0.3);
    }

    .tag-location {
        background: rgba(59, 130, 246, 0.15);
        color: #3b82f6;
        border-color: rgba(59, 130, 246, 0.3);
    }

    .tag-system {
        background: rgba(34, 197, 94, 0.15);
        color: #22c55e;
        border-color: rgba(34, 197, 94, 0.3);
    }

    .filter-controls {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        animation: fadeInUp 0.6s ease-out 0.3s both;
    }

    .filter-btn {
        padding: 0.75rem 1.5rem;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(15, 23, 42, 0.5);
        color: #94a3b8;
        border-radius: 0.75rem;
        font-size: 0.875rem;
        font-weight: 600;
        font-family: 'Space Mono', monospace;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .filter-btn:hover {
        background: rgba(30, 41, 59, 0.5);
        border-color: rgba(148, 163, 184, 0.3);
        color: #ffffff;
    }

    .filter-btn.active {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        border-color: rgba(59, 130, 246, 0.5);
        color: #ffffff;
    }

    @keyframes fadeInDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInScale {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }
</style>

<div class="alerts-container">
    <!-- Header -->
    <div class="alerts-header">
        <h1 class="alerts-title">
            <span>System Alerts</span>
        </h1>
        <p class="alerts-subtitle">
            <span class="pulse-indicator" id="pulse-indicator" style="display: none;"></span>
            <span id="alert-subtitle">Loading alerts...</span>
        </p>
    </div>

    <!-- Alert Statistics -->
    <div class="alerts-stats">
        <div class="stat-card">
            <div class="stat-number" style="color: #ef4444;" id="stat-critical">0</div>
            <div class="stat-label">Critical Alerts</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" style="color: #fb923c;" id="stat-warning">0</div>
            <div class="stat-label">Warnings</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" style="color: #3b82f6;" id="stat-info">0</div>
            <div class="stat-label">Informational</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" style="color: #22c55e;" id="stat-resolved">0</div>
            <div class="stat-label">Resolved</div>
        </div>
    </div>

    <!-- Filter Controls -->
    <div class="filter-controls">
        <button class="filter-btn active">All Alerts</button>
        <button class="filter-btn">Critical</button>
        <button class="filter-btn">Warnings</button>
        <button class="filter-btn">Info</button>
        <button class="filter-btn">Resolved</button>
    </div>

    <!-- Alerts Feed -->
    <div class="alerts-feed-container">
        <div class="feed-header">
            <h3 class="feed-title">
                <span>üì°</span>
                <span>Live Alert Feed</span>
            </h3>
        </div>

        <div class="feed-content">
            <!-- Critical Alert -->
            <div class="alert-item critical">
                <div class="alert-header">
                    <div class="alert-type">
                        <span class="alert-icon">üö®</span>
                        <span class="alert-label critical">CRITICAL</span>
                    </div>
                    <span class="alert-timestamp">14:30 Today</span>
                </div>
                <div class="alert-content">
                    <h4 class="alert-title">Dengue Outbreak Detected</h4>
                    <p class="alert-description">Brazil region showing 400% increase in reported cases over the past 7
                        days. Immediate attention required.</p>
                </div>
                <div class="alert-tags">
                    <span class="alert-tag tag-priority">High Priority</span>
                    <span class="alert-tag tag-location">South America</span>
                </div>
            </div>

            <!-- Warning Alert -->
            <div class="alert-item warning">
                <div class="alert-header">
                    <div class="alert-type">
                        <span class="alert-icon">‚ö†Ô∏è</span>
                        <span class="alert-label warning">WARNING</span>
                    </div>
                    <span class="alert-timestamp">09:15 Today</span>
                </div>
                <div class="alert-content">
                    <h4 class="alert-title">Malaria Risk Elevated</h4>
                    <p class="alert-description">Nairobi region experiencing increased water levels and temperature
                        conditions favorable for mosquito breeding.</p>
                </div>
                <div class="alert-tags">
                    <span class="alert-tag tag-warning">Medium Priority</span>
                    <span class="alert-tag tag-location">East Africa</span>
                </div>
            </div>

            <!-- Info Alert -->
            <div class="alert-item info">
                <div class="alert-header">
                    <div class="alert-type">
                        <span class="alert-icon">‚ÑπÔ∏è</span>
                        <span class="alert-label info">INFO</span>
                    </div>
                    <span class="alert-timestamp">08:00 Today</span>
                </div>
                <div class="alert-content">
                    <h4 class="alert-title">New Data Source Connected</h4>
                    <p class="alert-description">Successfully connected to WHO API. Now receiving real-time global
                        health data updates.</p>
                </div>
                <div class="alert-tags">
                    <span class="alert-tag tag-system">System</span>
                </div>
            </div>

            <!-- Success Alert -->
            <div class="alert-item success">
                <div class="alert-header">
                    <div class="alert-type">
                        <span class="alert-icon">‚úÖ</span>
                        <span class="alert-label success">SUCCESS</span>
                    </div>
                    <span class="alert-timestamp">Yesterday</span>
                </div>
                <div class="alert-content">
                    <h4 class="alert-title">Data Quality Improved</h4>
                    <p class="alert-description">Data validation accuracy increased to 98.5% after implementing new
                        quality checks.</p>
                </div>
                <div class="alert-tags">
                    <span class="alert-tag tag-system">System</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // ALERTS SYSTEM - Dynamic Data Binding & Interactivity
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    class AlertsSystem {
        constructor() {
            this.alerts = [];
            this.filteredAlerts = [];
            this.currentFilter = 'all';
            this.init();
        }

        async init() {
            await this.loadAlerts();
            this.setupEventListeners();
            this.renderAlerts();
        }

        async loadAlerts() {
            try {
                const response = await fetch('/api/system/alerts');
                const data = await response.json();
                
                // Transform backend alert structure to UI structure
                this.alerts = (data.alerts || data || []).map(alert => ({
                    id: alert.id || `alert-${Math.random()}`,
                    type: alert.type?.toLowerCase() || 'info',
                    severity: alert.severity || 50,
                    confidence: (alert.confidence || 0) * 100,
                    title: alert.title || 'System Alert',
                    description: alert.description || '',
                    region: alert.region || 'Global',
                    metric: alert.metric || 'N/A',
                    threshold: alert.threshold,
                    actual_value: alert.actual_value,
                    affected_count: alert.affected_count || 0,
                    recommendation: alert.recommendation || '',
                    timestamp: alert.timestamp || new Date().toISOString(),
                    data_source: alert.data_source || 'System',
                    status: alert.status || 'active'
                }));

                this.filteredAlerts = this.alerts;
                this.updateStatistics();
            } catch (error) {
                console.error('Failed to load alerts:', error);
                // Use fallback data for demo purposes
                this.loadFallbackAlerts();
            }
        }

        loadFallbackAlerts() {
            // Fallback sample alerts matching backend structure
            this.alerts = [
                {
                    id: 'alert-1',
                    type: 'critical',
                    severity: 95,
                    confidence: 0.98,
                    title: 'Dengue Outbreak Detected',
                    description: 'Brazil region showing 400% increase in reported cases over the past 7 days.',
                    region: 'Brazil',
                    metric: 'Daily Growth Rate',
                    threshold: 10,
                    actual_value: 42.5,
                    affected_count: 1250,
                    recommendation: 'Escalate to regional health authorities immediately',
                    timestamp: new Date().toISOString(),
                    data_source: 'WHO API',
                    status: 'active'
                },
                {
                    id: 'alert-2',
                    type: 'warning',
                    severity: 72,
                    confidence: 0.85,
                    title: 'Malaria Risk Elevated',
                    description: 'Nairobi region experiencing increased water levels and temperature conditions favorable for mosquito breeding.',
                    region: 'Nairobi',
                    metric: 'Risk Score',
                    threshold: 60,
                    actual_value: 72,
                    affected_count: 320,
                    recommendation: 'Prepare public health communication campaign',
                    timestamp: new Date(Date.now() - 5*60*60*1000).toISOString(),
                    data_source: 'Disease.sh',
                    status: 'active'
                },
                {
                    id: 'alert-3',
                    type: 'info',
                    severity: 30,
                    confidence: 1.0,
                    title: 'New Data Source Connected',
                    description: 'Successfully connected to WHO API. Now receiving real-time global health data updates.',
                    region: 'Global',
                    metric: 'System Status',
                    threshold: null,
                    actual_value: null,
                    affected_count: 0,
                    recommendation: 'Monitor data quality metrics',
                    timestamp: new Date(Date.now() - 8*60*60*1000).toISOString(),
                    data_source: 'System',
                    status: 'active'
                }
            ];
            this.filteredAlerts = this.alerts;
            this.updateStatistics();
        }

        setupEventListeners() {
            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    const filterText = e.target.textContent.toLowerCase();
                    if (filterText.includes('critical')) {
                        this.filterBy('critical');
                    } else if (filterText.includes('warning')) {
                        this.filterBy('warning');
                    } else if (filterText.includes('info')) {
                        this.filterBy('info');
                    } else {
                        this.filterBy('all');
                    }
                });
            });

            // Auto-refresh alerts every 30 seconds
            setInterval(() => this.loadAlerts(), 30000);
        }

        updateStatistics() {
            const stats = {
                critical: this.alerts.filter(a => a.type === 'critical' || a.type === 'emergency').length,
                warning: this.alerts.filter(a => a.type === 'warning').length,
                info: this.alerts.filter(a => a.type === 'info').length,
                resolved: this.alerts.filter(a => a.status === 'resolved').length
            };

            const totalActive = stats.critical + stats.warning + stats.info;

            // Update stat cards with dynamic IDs
            const criticalEl = document.getElementById('stat-critical');
            const warningEl = document.getElementById('stat-warning');
            const infoEl = document.getElementById('stat-info');
            const resolvedEl = document.getElementById('stat-resolved');
            
            if (criticalEl) criticalEl.textContent = stats.critical;
            if (warningEl) warningEl.textContent = stats.warning;
            if (infoEl) infoEl.textContent = stats.info;
            if (resolvedEl) resolvedEl.textContent = stats.resolved;

            // Update subtitle with dynamic count and pulse indicator
            const subtitleEl = document.getElementById('alert-subtitle');
            const pulseEl = document.getElementById('pulse-indicator');
            
            if (totalActive === 0) {
                if (subtitleEl) subtitleEl.textContent = 'All systems nominal - no active alerts';
                if (pulseEl) pulseEl.style.display = 'none';
            } else {
                if (subtitleEl) {
                    if (stats.critical > 0) {
                        subtitleEl.innerHTML = `<span style="color: #ef4444; font-weight: 700;">${totalActive} ${totalActive === 1 ? 'CRITICAL alert' : 'critical alerts'}</span> requiring immediate attention`;
                    } else {
                        subtitleEl.textContent = `${totalActive} active ${totalActive === 1 ? 'alert' : 'alerts'} requiring attention`;
                    }
                }
                if (pulseEl) pulseEl.style.display = 'inline-block';
            }
        }

        filterBy(type) {
            this.currentFilter = type;
            if (type === 'all') {
                this.filteredAlerts = this.alerts;
            } else {
                this.filteredAlerts = this.alerts.filter(a => a.type === type);
            }
            this.renderAlerts();
        }

        renderAlerts() {
            const feedContent = document.querySelector('.feed-content');
            
            if (this.filteredAlerts.length === 0) {
                feedContent.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">‚úì</div>
                        <div class="empty-text">All Systems Nominal</div>
                        <p>No alerts matching current filter</p>
                    </div>
                `;
                // Ensure proper layout for empty state
                feedContent.style.display = 'flex';
                feedContent.style.alignItems = 'center';
                feedContent.style.justifyContent = 'center';
                return;
            }

            // Reset display for actual alerts
            feedContent.style.display = 'block';
            feedContent.innerHTML = this.filteredAlerts.map(alert => this.renderAlertItem(alert)).join('');
            
            // Add interaction handlers
            document.querySelectorAll('.alert-item').forEach(item => {
                item.addEventListener('mouseenter', (e) => {
                    e.currentTarget.style.transform = 'translateX(4px)';
                });
                item.addEventListener('mouseleave', (e) => {
                    e.currentTarget.style.transform = 'translateX(0)';
                });
            });
        }

        renderAlertItem(alert) {
            const timeAgo = this.getRelativeTime(alert.timestamp);
            const severityColor = this.getSeverityColor(alert.type);
            const severityIcon = this.getSeverityIcon(alert.type);
            const confidenceBar = Math.round(alert.confidence);

            return `
                <div class="alert-item ${alert.type}">
                    <div class="alert-header">
                        <div class="alert-type">
                            <span class="alert-icon">${severityIcon}</span>
                            <span class="alert-label ${alert.type}">${alert.type.toUpperCase()}</span>
                        </div>
                        <span class="alert-timestamp">
                            <span title="${new Date(alert.timestamp).toLocaleString()}">${timeAgo}</span>
                        </span>
                    </div>
                    
                    <div class="alert-content">
                        <h4 class="alert-title">${this.escapeHtml(alert.title)}</h4>
                        <p class="alert-description">${this.escapeHtml(alert.description)}</p>
                        
                        ${alert.actual_value !== null || alert.threshold !== null ? `
                        <div class="alert-metrics">
                            ${alert.metric ? `
                            <div class="metric-item">
                                <span class="metric-label">Metric</span>
                                <span class="metric-value">${this.escapeHtml(alert.metric)}</span>
                            </div>
                            ` : ''}
                            ${alert.actual_value !== null ? `
                            <div class="metric-item">
                                <span class="metric-label">Actual Value</span>
                                <span class="metric-value">${this.formatValue(alert.actual_value)}</span>
                            </div>
                            ` : ''}
                            ${alert.threshold !== null ? `
                            <div class="metric-item">
                                <span class="metric-label">Threshold</span>
                                <span class="metric-value">${this.formatValue(alert.threshold)}</span>
                            </div>
                            ` : ''}
                            ${alert.affected_count ? `
                            <div class="metric-item">
                                <span class="metric-label">Affected</span>
                                <span class="metric-value">${alert.affected_count.toLocaleString()}</span>
                            </div>
                            ` : ''}
                            <div class="metric-item">
                                <span class="metric-label">Confidence</span>
                                <span class="metric-value">${confidenceBar}%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Severity</span>
                                <span class="metric-value">${Math.round(alert.severity)}/100</span>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${alert.recommendation ? `
                        <p style="color: #cbd5e1; font-size: 0.875rem; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(148, 163, 184, 0.1);">
                            <strong>Recommendation:</strong> ${this.escapeHtml(alert.recommendation)}
                        </p>
                        ` : ''}
                    </div>
                    
                    <div class="alert-tags">
                        ${alert.region ? `<span class="alert-tag tag-location">${this.escapeHtml(alert.region)}</span>` : ''}
                        ${alert.status === 'active' ? `<span class="alert-tag tag-priority">‚ö° Active</span>` : ''}
                        ${alert.data_source ? `<span class="alert-tag tag-system">${this.escapeHtml(alert.data_source)}</span>` : ''}
                    </div>
                </div>
            `;
        }

        getSeverityIcon(type) {
            const icons = {
                'emergency': 'üö®',
                'critical': 'üî¥',
                'warning': '‚ö†Ô∏è',
                'info': '‚ÑπÔ∏è',
                'success': '‚úÖ'
            };
            return icons[type] || '‚ÑπÔ∏è';
        }

        getSeverityColor(type) {
            const colors = {
                'emergency': '#ef4444',
                'critical': '#dc2626',
                'warning': '#fb923c',
                'info': '#3b82f6',
                'success': '#22c55e'
            };
            return colors[type] || '#3b82f6';
        }

        getRelativeTime(timestamp) {
            const now = new Date();
            const date = new Date(timestamp);
            const seconds = Math.floor((now - date) / 1000);
            
            if (seconds < 60) return 'just now';
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}m ago`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours}h ago`;
            const days = Math.floor(hours / 24);
            if (days < 7) return `${days}d ago`;
            return date.toLocaleDateString();
        }

        formatValue(value) {
            if (typeof value === 'number') {
                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                if (value >= 1000) return (value / 1000).toFixed(1) + 'K';
                if (value < 1 && value > 0) return value.toFixed(2);
                return Math.round(value).toLocaleString();
            }
            return String(value);
        }

        escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    }

    // Initialize alerts system on page load
    document.addEventListener('DOMContentLoaded', () => {
        window.alertsSystem = new AlertsSystem();
    });
</script>
{% endblock %}